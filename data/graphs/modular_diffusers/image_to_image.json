{"nodes":[{"id":"xoO5v5A46aiDzRV8CdwQf","type":"custom","position":{"x":727.9860859499502,"y":-52.21875009781645},"data":{"module":"modules.ModularDiffusers","action":"EncodePrompt","type":"custom","label":"Encode Prompt","category":"embedding","description":"","resizable":true,"skipParamsCheck":true,"style":{},"params":{"text_encoders":{"label":"Text Encoders *","type":"diffusers_auto_models","display":"input","onSignal":"update_node","isConnected":true,"signal":{"direction":"output","value":"ZImageModularPipeline"},"disabled":false},"prompt":{"label":"Prompt *","type":"string","display":"textarea","default":"","value":"a rabbit"},"embeddings":{"label":"Text Embeddings","type":"embeddings","display":"output","isConnected":true},"doc":{"label":"Doc","type":"string","display":"output","isConnected":false}},"time":[0,0,0],"memory":[0,0,0],"cache":false,"progress":0,"isCached":true,"memoryUsage":{"last":8316807680,"min":8316807680,"max":8316807680},"executionTime":{"last":3.8661952018737793,"min":3.8661952018737793,"max":3.8661952018737793}},"measured":{"width":236,"height":266},"selected":false,"dragging":false},{"id":"fNoX-2jsWixE29bRBWCPz","type":"custom","position":{"x":1566.1547042087227,"y":-70.96344239594912},"data":{"module":"modules.ModularDiffusers","action":"DecodeLatents","type":"custom","label":"Decode Latents","category":"sampler","description":"","resizable":true,"skipParamsCheck":true,"style":{},"params":{"vae":{"label":"VAE *","display":"input","type":"diffusers_auto_model","onSignal":"update_node","isConnected":true,"signal":{"direction":"output","value":"ZImageModularPipeline"},"disabled":false},"latents":{"label":"Latents *","type":"latents","display":"input","isConnected":true},"images":{"label":"Images","type":"image","display":"output","isConnected":true},"doc":{"label":"Doc","type":"string","display":"output","isConnected":false}},"time":[0,0,0],"memory":[0,0,0],"cache":false,"progress":0,"isCached":true,"memoryUsage":{"last":22607324160,"min":22607324160,"max":22607324160},"executionTime":{"last":0.546771764755249,"min":0.546771764755249,"max":0.546771764755249}},"measured":{"width":236,"height":195},"selected":false,"dragging":false},{"id":"awx_oWVfLRXTd58gvvQs-","type":"custom","position":{"x":726.071757968142,"y":397.76239548733645},"data":{"module":"modules.ModularDiffusers","action":"ImageEncode","type":"custom","label":"Encode Image","category":"sampler","description":"","resizable":true,"skipParamsCheck":true,"style":{},"params":{"vae":{"label":"VAE *","display":"input","type":"diffusers_auto_model","onSignal":"update_node","isConnected":true,"signal":{"direction":"output","value":"ZImageModularPipeline"},"disabled":false},"image":{"label":"Image *","type":"image","display":"input","isConnected":true},"image_latents":{"label":"Image Latents","type":"latents","display":"output","isConnected":true},"doc":{"label":"Doc","type":"string","display":"output","isConnected":false}},"time":[0,0,0],"memory":[0,0,0],"cache":false,"progress":0,"isCached":true,"memoryUsage":{"last":9506501632,"min":9506501632,"max":9506501632},"executionTime":{"last":0.705026388168335,"min":0.705026388168335,"max":0.705026388168335}},"measured":{"width":228,"height":195},"selected":false,"dragging":false},{"id":"hzu0l03gW40i0hdxHA2uR","type":"custom","position":{"x":233.3150439945601,"y":-113.75885553427531},"data":{"module":"modules.ModularDiffusers","action":"ModelsLoader","type":"custom","label":"Load Models","category":"loader","description":"","resizable":true,"skipParamsCheck":true,"style":{},"params":{"model_type":{"label":"Model Type","type":"string","options":{"":"","DummyCustomPipeline":"Custom","StableDiffusionXLModularPipeline":"Stable Diffusion XL","QwenImageModularPipeline":"Qwen Image","QwenImageEditModularPipeline":"Qwen Image Edit","QwenImageEditPlusModularPipeline":"Qwen Image Edit Plus","QwenImageLayeredModularPipeline":"Qwen Image Layered","FluxModularPipeline":"Flux","FluxKontextModularPipeline":"Flux Kontext","Flux2KleinModularPipeline":"Flux 2 Klein Distilled","ZImageModularPipeline":"Z-Image","WanModularPipeline":"WAN"},"onChange":["set_filters",{"action":"signal","target":"unet_out"},{"action":"signal","target":"text_encoders"},{"action":"signal","target":"vae_out"},{"action":"signal","target":"image_encoder"}],"disabled":false,"value":"ZImageModularPipeline"},"repo_id":{"label":"Repository ID","display":"modelselect","type":"string","value":{"source":"hub","value":"Tongyi-MAI/Z-Image-Turbo"},"fieldOptions":{"noValidation":true,"sources":["hub","local"],"filter":{"hub":{"className":["ZImageModularPipeline"]}}},"disabled":false,"default":{"source":"hub","value":"Tongyi-MAI/Z-Image-Turbo"}},"dtype":{"label":"dtype","options":["float32","float16","bfloat16"],"value":"bfloat16","disabled":false},"device":{"label":"Device","type":"string","value":"cuda:0","options":{"cuda:0":{"arch":"cuda","name":"NVIDIA GeForce RTX 5090 31.34GB (0)","label":["cuda:0"],"total_memory":33647820800,"index":0},"cpu:0":{"arch":"cpu","name":"CPU (0)","label":["cpu:0"],"total_memory":0,"index":0}}},"trust_remote_code":{"label":"Trust Remote Code","type":"boolean","value":false},"auto_offload":{"label":"Enable Auto Offload","type":"boolean","value":true},"unet":{"label":"Denoise Model","display":"input","type":"diffusers_auto_model","isConnected":false},"vae":{"label":"VAE","display":"input","type":"diffusers_auto_model","isConnected":false},"lora_list":{"label":"Lora","display":"input","type":"custom_lora","isConnected":false},"text_encoders":{"label":"Text Encoders","display":"output","type":"diffusers_auto_models","signal":{"direction":"output","origin":"model_type","value":"ZImageModularPipeline"},"isConnected":true},"unet_out":{"label":"Denoise Model","display":"output","type":"diffusers_auto_model","signal":{"direction":"output","origin":"model_type","value":"ZImageModularPipeline"},"isConnected":true},"vae_out":{"label":"VAE","display":"output","type":"diffusers_auto_model","signal":{"direction":"output","origin":"model_type","value":"ZImageModularPipeline"},"isConnected":true},"scheduler":{"label":"Scheduler","display":"output","type":"diffusers_auto_model","isConnected":true},"image_encoder":{"label":"Image Encoder","display":"output","type":"diffusers_auto_model","signal":{"direction":"output","origin":"model_type","value":"ZImageModularPipeline"},"isConnected":false},"quant_config":{"label":"Quant Config","display":"input","type":"quant_config","isConnected":false}},"time":[0,0,0],"memory":[0,0,0],"cache":false,"progress":0,"isCached":true,"memoryUsage":{"last":0,"min":0,"max":0},"executionTime":{"last":8.357560873031616,"min":8.357560873031616,"max":8.357560873031616}},"measured":{"width":319,"height":563},"selected":true,"dragging":false},{"id":"_djQOIxcQQg8_HzMF2jJE","type":"custom","position":{"x":243.28339536373954,"y":588.2978908950809},"data":{"module":"modules.Image","action":"Load","type":"custom","label":"Load Image","category":"image","description":"Load an image from a file","resizable":true,"skipParamsCheck":false,"style":{},"params":{"image":{"label":"Image","display":"output","type":"image","isConnected":true},"label":{"display":"ui_label","value":"Load Image"},"file":{"label":false,"display":"filebrowser","type":"str","fieldOptions":{"fileTypes":["image"],"multiple":true},"value":["https://huggingface.co/datasets/OzzyGT/diffusers-examples/resolve/main/resources/turtle.png"]},"alpha_channel":{"label":"Alpha Channel","type":"string","options":["ignore","add alpha","remove alpha"],"default":"ignore"},"width":{"display":"output","type":"int","isConnected":false},"height":{"display":"output","type":"int","isConnected":false}},"time":[0,0,0],"memory":[0,0,0],"cache":false,"progress":0,"isCached":true,"memoryUsage":{"last":8110280704,"min":8110280704,"max":8110280704},"executionTime":{"last":0.3018989562988281,"min":0.3018989562988281,"max":0.3018989562988281}},"measured":{"width":394,"height":590},"selected":false,"dragging":false},{"id":"xbAbVqpJ1lkfp0_Z6L4CV","type":"custom","position":{"x":1104.833763699968,"y":-83.85380142673681},"data":{"module":"modules.ModularDiffusers","action":"Denoise","type":"custom","label":"Denoise","category":"sampler","description":"","resizable":true,"skipParamsCheck":true,"style":{},"params":{"unet":{"label":"Denoise Model *","display":"input","type":"diffusers_auto_model","onSignal":["update_node",{"action":"signal","target":"guider"},{"action":"signal","target":"controlnet_bundle"}],"disabled":false,"isConnected":true,"signal":{"direction":"output","value":"ZImageModularPipeline"}},"embeddings":{"label":"Text Embeddings *","type":"embeddings","display":"input","isConnected":true},"width":{"label":"Width","type":"int","default":1024,"min":64,"step":8,"value":1024,"hidden":true},"height":{"label":"Height","type":"int","default":1024,"min":64,"step":8,"value":1024,"hidden":true},"seed":{"label":"Seed","type":"int","display":"random","default":0,"min":0,"max":4294967295,"value":0},"num_inference_steps":{"label":"Steps","type":"int","display":"slider","default":9,"min":1,"max":100,"value":9},"guidance_scale":{"label":"Guidance Scale","type":"float","display":"slider","default":1,"min":1,"max":30,"step":0.1,"value":1,"hidden":false},"image_latents":{"label":"Image Latents","type":"latents","display":"input","onChange":{"false":["height","width"],"true":["strength"]},"isConnected":true},"strength":{"label":"Strength","type":"float","default":0.5,"min":0,"max":1,"step":0.01,"value":0.5,"hidden":false},"guider":{"label":"Guider","type":"custom_guider","display":"input","onChange":{"false":["guidance_scale"],"true":[]},"isConnected":false},"scheduler":{"label":"Scheduler *","type":"diffusers_auto_model","display":"input","isConnected":true},"latents":{"label":"Latents","type":"latents","display":"output","isConnected":true},"doc":{"label":"Doc","type":"string","display":"output","isConnected":false}},"time":[0,0,0],"memory":[0,0,0],"cache":false,"progress":0,"isCached":true,"memoryUsage":{"last":21071249920,"min":21071249920,"max":21071249920},"executionTime":{"last":2.6162049770355225,"min":2.6162049770355225,"max":2.6162049770355225}},"measured":{"width":386,"height":420},"selected":false,"dragging":false},{"id":"ktsJ1brnEY_PTMFv3yqU7","type":"custom","position":{"x":1663.0614403740196,"y":226.58914121342468},"data":{"module":"modules.Image","action":"Preview","type":"custom","label":"Preview Image","category":"image","description":"Preview an image","resizable":true,"skipParamsCheck":false,"style":{},"params":{"vae":{"type":"pipeline","display":"input","label":"VAE","isConnected":false,"hidden":true},"device":{"type":"string","default":"cuda:0","options":{"cuda:0":{"arch":"cuda","name":"NVIDIA GeForce RTX 5090 31.34GB (0)","label":["cuda:0"],"total_memory":33647820800,"index":0},"cpu:0":{"arch":"cpu","name":"CPU (0)","label":["cpu:0"],"total_memory":0,"index":0}},"hidden":true},"image":{"type":["image","latent"],"display":"input","onChange":{"action":"show","data":{"true":["vae","device"],"false":[]},"condition":{"type":"latent"}},"isConnected":true},"preview":{"display":"ui_image","type":"url","dataSource":"output","value":["/cache/ktsJ1brnEY_PTMFv3yqU7/output/0?format=WEBP&quality=100&t=1770218044.8301468"]},"output":{"type":"image","display":"output","label":"All images","isConnected":false},"export":{"type":"str","default":"0","description":"Export the image at the given index. Leave empty to export all images."},"filtered":{"type":"image","display":"output","label":"Selected image","isConnected":false}},"time":[0,0,0],"memory":[0,0,0],"cache":false,"progress":0,"isCached":true,"memoryUsage":{"last":20692231168,"min":20692231168,"max":20692231168},"executionTime":{"last":0.00005030632019042969,"min":0.00005030632019042969,"max":0.00005030632019042969}},"measured":{"width":1044,"height":985},"selected":false,"dragging":false}],"edges":[{"source":"hzu0l03gW40i0hdxHA2uR","target":"xoO5v5A46aiDzRV8CdwQf","sourceHandle":"text_encoders","targetHandle":"text_encoders","edgeType":"default","id":"opkJ4Qfle6cliTjjM1vVC","type":"default","className":"category-diffusers_auto_models"},{"source":"hzu0l03gW40i0hdxHA2uR","target":"awx_oWVfLRXTd58gvvQs-","sourceHandle":"vae_out","targetHandle":"vae","edgeType":"default","id":"VjEk3gqjxQglsAjLx42xZ","type":"default","className":"category-diffusers_auto_model"},{"source":"_djQOIxcQQg8_HzMF2jJE","sourceHandle":"image","target":"awx_oWVfLRXTd58gvvQs-","targetHandle":"image","edgeType":"default","id":"n99Ul20K5liiziJnQ6FiR","type":"default","className":"category-image"},{"source":"hzu0l03gW40i0hdxHA2uR","target":"xbAbVqpJ1lkfp0_Z6L4CV","sourceHandle":"unet_out","targetHandle":"unet","edgeType":"default","id":"T1NIO2mDP2xc8km3Jpxrt","type":"default","className":"category-diffusers_auto_model"},{"source":"awx_oWVfLRXTd58gvvQs-","sourceHandle":"image_latents","target":"xbAbVqpJ1lkfp0_Z6L4CV","targetHandle":"image_latents","edgeType":"default","id":"HFM7OCm3Pp2kHBKZ6psH5","type":"default","className":"category-latents"},{"source":"xoO5v5A46aiDzRV8CdwQf","sourceHandle":"embeddings","target":"xbAbVqpJ1lkfp0_Z6L4CV","targetHandle":"embeddings","edgeType":"default","id":"DcMdTGnP4K4YDU7QXCbt-","type":"default","className":"category-embeddings"},{"source":"hzu0l03gW40i0hdxHA2uR","sourceHandle":"scheduler","target":"xbAbVqpJ1lkfp0_Z6L4CV","targetHandle":"scheduler","edgeType":"default","id":"gb51IZAdmE1W22hXEr5xl","type":"default","className":"category-diffusers_auto_model"},{"source":"hzu0l03gW40i0hdxHA2uR","target":"fNoX-2jsWixE29bRBWCPz","sourceHandle":"vae_out","targetHandle":"vae","edgeType":"default","id":"ubuEO25jIvbOsL74vvor5","type":"default","className":"category-diffusers_auto_model"},{"source":"xbAbVqpJ1lkfp0_Z6L4CV","sourceHandle":"latents","target":"fNoX-2jsWixE29bRBWCPz","targetHandle":"latents","edgeType":"default","id":"LgtCOHWN-qlrcWomFbkHC","type":"default","className":"category-latents"},{"source":"fNoX-2jsWixE29bRBWCPz","sourceHandle":"images","target":"ktsJ1brnEY_PTMFv3yqU7","targetHandle":"image","edgeType":"default","id":"eTcb2n5rx0xJ8EgPvTXJP","type":"default","className":"category-image"}],"viewport":{"x":-3.8390589853727306,"y":151.88402086246606,"zoom":0.7022224378689988}}