{"nodes":[{"id":"xoO5v5A46aiDzRV8CdwQf","type":"custom","position":{"x":703.6294010837418,"y":-49.54467952315033},"data":{"module":"modules.ModularDiffusers","action":"EncodePrompt","type":"custom","label":"Encode Prompt","category":"embedding","description":"","resizable":true,"skipParamsCheck":true,"style":{},"params":{"text_encoders":{"label":"Text Encoders *","type":"diffusers_auto_models","display":"input","onSignal":"update_node","isConnected":true,"signal":{"direction":"output","value":"Flux2KleinModularPipeline"},"disabled":false},"prompt":{"label":"Prompt *","type":"string","display":"textarea","default":"","value":"a cat"},"embeddings":{"label":"Text Embeddings","type":"embeddings","display":"output","isConnected":true},"doc":{"label":"Doc","type":"string","display":"output","isConnected":false}},"time":[0,0,0],"memory":[0,0,0],"cache":false,"progress":0,"isCached":true,"memoryUsage":{"last":10809725952,"min":927646208,"max":16646008832},"executionTime":{"last":0.5361003875732422,"min":0.00002574920654296875,"max":7.7100136280059814}},"measured":{"width":292,"height":347},"selected":false,"dragging":false,"width":292,"height":347},{"id":"1nWjS_jWwtCQQwxTEQwC8","type":"custom","position":{"x":1092.9508742587448,"y":-50.910719779904696},"data":{"module":"modules.ModularDiffusers","action":"Denoise","type":"custom","label":"Denoise","category":"sampler","description":"","resizable":true,"skipParamsCheck":true,"style":{},"params":{"unet":{"label":"Denoise Model *","display":"input","type":"diffusers_auto_model","onSignal":["update_node",{"action":"signal","target":"guider"},{"action":"signal","target":"controlnet_bundle"}],"isConnected":true,"signal":{"direction":"output","value":"Flux2KleinModularPipeline"},"disabled":false},"embeddings":{"label":"Text Embeddings *","type":"embeddings","display":"input","isConnected":true},"width":{"label":"Width","type":"int","default":1024,"min":64,"step":8,"value":1024},"height":{"label":"Height","type":"int","default":1024,"min":64,"step":8,"value":1024},"seed":{"label":"Seed","type":"int","display":"random","default":0,"min":0,"max":4294967295,"value":0},"num_inference_steps":{"label":"Steps","type":"int","display":"slider","default":4,"min":1,"max":100,"value":4},"guidance_scale":{"label":"Guidance Scale","type":"float","display":"slider","default":1,"min":1,"max":30,"step":0.1,"value":1},"image_latents":{"label":"Image Latents","type":"latents","display":"input","isConnected":false},"guider":{"label":"Guider","type":"custom_guider","display":"input","onChange":{"false":["guidance_scale"],"true":[]},"isConnected":false},"scheduler":{"label":"Scheduler *","type":"diffusers_auto_model","display":"input","isConnected":true},"latents":{"label":"Latents","type":"latents","display":"output","isConnected":true},"doc":{"label":"Doc","type":"string","display":"output","isConnected":false}},"time":[0,0,0],"memory":[0,0,0],"cache":false,"progress":0,"isCached":true,"memoryUsage":{"last":3320028672,"min":927646208,"max":29000342016},"executionTime":{"last":3.2859530448913574,"min":0.000019788742065429688,"max":168.20590543746948}},"measured":{"width":386,"height":456},"selected":false,"dragging":false},{"id":"fNoX-2jsWixE29bRBWCPz","type":"custom","position":{"x":1586.0914069470814,"y":-48.178639266395976},"data":{"module":"modules.ModularDiffusers","action":"DecodeLatents","type":"custom","label":"Decode Latents","category":"sampler","description":"","resizable":true,"skipParamsCheck":true,"style":{},"params":{"vae":{"label":"VAE *","display":"input","type":"diffusers_auto_model","onSignal":"update_node","isConnected":true,"signal":{"direction":"output","value":"Flux2KleinModularPipeline"},"disabled":false},"latents":{"label":"Latents *","type":"latents","display":"input","isConnected":true},"images":{"label":"Images","type":"image","display":"output","isConnected":true},"doc":{"label":"Doc","type":"string","display":"output","isConnected":false}},"time":[0,0,0],"memory":[0,0,0],"cache":false,"progress":0,"isCached":true,"memoryUsage":{"last":5004914688,"min":927646208,"max":28290637824},"executionTime":{"last":0.5742390155792236,"min":0.000010967254638671875,"max":2.0491414070129395}},"measured":{"width":228,"height":195},"selected":false,"dragging":false},{"id":"QxVdwi0hW7_hLjhcRrFNJ","type":"custom","position":{"x":230.97947224672117,"y":-97.35608850955407},"data":{"module":"modules.ModularDiffusers","action":"ModelsLoader","type":"custom","label":"Load Models","category":"loader","description":"","resizable":true,"skipParamsCheck":true,"style":{},"params":{"model_type":{"label":"Model Type","type":"string","options":{"":"","DummyCustomPipeline":"Custom","StableDiffusionXLModularPipeline":"Stable Diffusion XL","QwenImageModularPipeline":"Qwen Image","QwenImageEditModularPipeline":"Qwen Image Edit","QwenImageEditPlusModularPipeline":"Qwen Image Edit Plus","QwenImageLayeredModularPipeline":"Qwen Image Layered","FluxModularPipeline":"Flux","FluxKontextModularPipeline":"Flux Kontext","Flux2KleinModularPipeline":"Flux 2 Klein Distilled","ZImageModularPipeline":"Z-Image","WanModularPipeline":"WAN"},"onChange":["set_filters",{"action":"signal","target":"unet_out"},{"action":"signal","target":"text_encoders"},{"action":"signal","target":"vae_out"},{"action":"signal","target":"image_encoder"}],"disabled":false,"value":"Flux2KleinModularPipeline"},"repo_id":{"label":"Repository ID","display":"modelselect","type":"string","value":{"source":"hub","value":"black-forest-labs/FLUX.2-klein-4B"},"fieldOptions":{"noValidation":true,"sources":["hub","local"],"filter":{"hub":{"className":["Flux2KleinModularPipeline"]}}},"disabled":false,"default":{"source":"hub","value":"black-forest-labs/FLUX.2-klein-4B"}},"dtype":{"label":"dtype","options":["float32","float16","bfloat16"],"value":"bfloat16","disabled":false},"device":{"label":"Device","type":"string","value":"cuda:0","options":{"cuda:0":{"arch":"cuda","name":"NVIDIA GeForce RTX 5090 31.34GB (0)","label":["cuda:0"],"total_memory":33647820800,"index":0},"cpu:0":{"arch":"cpu","name":"CPU (0)","label":["cpu:0"],"total_memory":0,"index":0}}},"trust_remote_code":{"label":"Trust Remote Code","type":"boolean","value":false},"auto_offload":{"label":"Enable Auto Offload","type":"boolean","value":true},"unet":{"label":"Denoise Model","display":"input","type":"diffusers_auto_model","isConnected":false},"vae":{"label":"VAE","display":"input","type":"diffusers_auto_model","isConnected":false},"lora_list":{"label":"Lora","display":"input","type":"custom_lora","isConnected":false},"text_encoders":{"label":"Text Encoders","display":"output","type":"diffusers_auto_models","signal":{"direction":"output","origin":"model_type","value":"Flux2KleinModularPipeline"},"isConnected":true},"unet_out":{"label":"Denoise Model","display":"output","type":"diffusers_auto_model","signal":{"direction":"output","origin":"model_type","value":"Flux2KleinModularPipeline"},"isConnected":true},"vae_out":{"label":"VAE","display":"output","type":"diffusers_auto_model","signal":{"direction":"output","origin":"model_type","value":"Flux2KleinModularPipeline"},"isConnected":true},"scheduler":{"label":"Scheduler","display":"output","type":"diffusers_auto_model","isConnected":true},"image_encoder":{"label":"Image Encoder","display":"output","type":"diffusers_auto_model","signal":{"direction":"output","origin":"model_type","value":"Flux2KleinModularPipeline"},"isConnected":false},"quant_config":{"label":"Quant Config","display":"input","type":"quant_config","isConnected":true}},"time":[0,0,0],"memory":[0,0,0],"cache":false,"progress":0,"isCached":true,"memoryUsage":{"last":7991824896,"min":927646208,"max":30606155264},"executionTime":{"last":3.3953962326049805,"min":0.00003075599670410156,"max":24.532272577285767}},"measured":{"width":374,"height":550},"selected":false,"dragging":false,"width":374,"height":550},{"id":"VTCmChLrJK5KEJYBrRU05","type":"custom","position":{"x":1889.3523439465569,"y":-49.54467952315035},"data":{"module":"modules.Image","action":"Preview","type":"custom","label":"Preview Image","category":"image","description":"Preview an image","resizable":true,"skipParamsCheck":false,"style":{},"params":{"vae":{"type":"pipeline","display":"input","label":"VAE","isConnected":false,"hidden":true},"device":{"type":"string","default":"cuda:0","options":{"cuda:0":{"arch":"cuda","name":"NVIDIA GeForce RTX 5090 31.34GB (0)","label":["cuda:0"],"total_memory":33647820800,"index":0},"cpu:0":{"arch":"cpu","name":"CPU (0)","label":["cpu:0"],"total_memory":0,"index":0}},"hidden":true},"image":{"type":["image","latent"],"display":"input","onChange":{"action":"show","data":{"true":["vae","device"],"false":[]},"condition":{"type":"latent"}},"isConnected":true},"preview":{"display":"ui_image","type":"url","dataSource":"output","value":["/cache/VTCmChLrJK5KEJYBrRU05/output/0?format=WEBP&quality=100&t=1770219384.1695094"]},"output":{"type":"image","display":"output","label":"All images","isConnected":false},"export":{"type":"str","default":"0","description":"Export the image at the given index. Leave empty to export all images."},"filtered":{"type":"image","display":"output","label":"Selected image","isConnected":false}},"time":[0,0,0],"memory":[0,0,0],"cache":false,"progress":0,"isCached":true,"memoryUsage":{"last":2450582528,"min":927646208,"max":16881360384},"executionTime":{"last":0.0008842945098876953,"min":0.00002574920654296875,"max":0.0009913444519042969}},"measured":{"width":1044,"height":1241},"selected":false,"dragging":false},{"id":"UWzYElWHfY_22Krt_T7oE","type":"custom","position":{"x":-187.12909553554226,"y":-11.075605984738871},"data":{"module":"modules.ModularDiffusers","action":"QuantizationConfigNode","type":"custom","label":"Quantization Config","category":"loader","description":"","resizable":true,"skipParamsCheck":true,"style":{},"params":{"model_id":{"label":"Model ID","display":"modelselect","type":"string","value":{"source":"hub","value":"black-forest-labs/FLUX.2-klein-4B"},"fieldOptions":{"noValidation":true,"sources":["hub","local"]}},"subfolder":{"label":"Subfolder","type":"string","value":"transformer"},"load_layers_button":{"label":"Load Model Layers","display":"ui_button","value":false,"onChange":"update_skip_modules"},"component":{"label":"Component","type":"string","value":"transformer"},"quant_type":{"label":"Quant Type","type":"string","options":["bnb_4bit","bnb_8bit"],"value":"bnb_4bit","onChange":{"bnb_4bit":["bnb_4bit_quant_type","bnb_4bit_compute_dtype","bnb_4bit_use_double_quant"],"bnb_8bit":["llm_int8_threshold","llm_int8_has_fp16_weight"]}},"bnb_4bit_quant_type":{"label":"4-bit Quant Type","type":"string","options":["nf4","fp4"],"value":"nf4","hidden":false},"bnb_4bit_compute_dtype":{"label":"Compute Dtype","type":"string","options":["","float32","float16","bfloat16"],"value":"","hidden":false},"bnb_4bit_use_double_quant":{"label":"Double Quant","type":"boolean","value":false,"hidden":false},"llm_int8_threshold":{"label":"Int8 Threshold","type":"float","display":"slider","default":6,"min":0,"max":10,"step":0.5,"hidden":true},"llm_int8_has_fp16_weight":{"label":"Has FP16 Weight","type":"boolean","value":false,"hidden":true},"llm_int8_skip_modules":{"label":"Skip Modules","type":"string","display":"select","options":[],"fieldOptions":{"multiple":true},"value":[]},"quantization_config":{"label":"Quantization Config","type":"quant_config","display":"output","isConnected":true},"config_info":{"label":"Quantization Config Info","type":"string","display":"output","isConnected":false}},"time":[0,0,0],"memory":[0,0,0],"cache":false,"progress":0,"isCached":true,"memoryUsage":{"last":12696442880,"min":12696442880,"max":12696442880},"executionTime":{"last":0.0008592605590820312,"min":0.0008592605590820312,"max":0.0008592605590820312}},"measured":{"width":303,"height":500},"selected":false,"dragging":false}],"edges":[{"source":"QxVdwi0hW7_hLjhcRrFNJ","target":"fNoX-2jsWixE29bRBWCPz","sourceHandle":"vae_out","targetHandle":"vae","edgeType":"default","id":"OUG-jpOwjbgTJnmzFzmxd","type":"default","className":"category-diffusers_auto_model"},{"source":"fNoX-2jsWixE29bRBWCPz","target":"VTCmChLrJK5KEJYBrRU05","sourceHandle":"images","targetHandle":"image","edgeType":"default","id":"2x67dYbsJ57aWoIH5JLxx","type":"default","className":"category-image"},{"source":"QxVdwi0hW7_hLjhcRrFNJ","target":"1nWjS_jWwtCQQwxTEQwC8","sourceHandle":"unet_out","targetHandle":"unet","edgeType":"default","id":"JEh4NYlx3OyFulp0yHJzy","type":"default","className":"category-diffusers_auto_model"},{"source":"QxVdwi0hW7_hLjhcRrFNJ","target":"1nWjS_jWwtCQQwxTEQwC8","sourceHandle":"scheduler","targetHandle":"scheduler","edgeType":"default","id":"rokx_1vgNZzxkJZTim_XO","type":"default","className":"category-diffusers_auto_model"},{"source":"1nWjS_jWwtCQQwxTEQwC8","target":"fNoX-2jsWixE29bRBWCPz","sourceHandle":"latents","targetHandle":"latents","edgeType":"default","id":"kGv_8gQYihRE8_690dGRK","type":"default","className":"category-latents"},{"source":"QxVdwi0hW7_hLjhcRrFNJ","target":"xoO5v5A46aiDzRV8CdwQf","sourceHandle":"text_encoders","targetHandle":"text_encoders","edgeType":"default","id":"eWmKJdS42183RvJejiR2Y","type":"default","className":"category-diffusers_auto_models"},{"source":"xoO5v5A46aiDzRV8CdwQf","target":"1nWjS_jWwtCQQwxTEQwC8","sourceHandle":"embeddings","targetHandle":"embeddings","edgeType":"default","id":"XAmHuBXPGNiLaAsXv0_gc","type":"default","className":"category-embeddings"},{"source":"UWzYElWHfY_22Krt_T7oE","sourceHandle":"quantization_config","target":"QxVdwi0hW7_hLjhcRrFNJ","targetHandle":"quant_config","edgeType":"default","id":"3-i-5nRaGbd1cHB97gtaR","type":"default","className":"category-quant_config"}],"viewport":{"x":186.44996827734076,"y":150.5676115687125,"zoom":0.5586435690361113}}