{"nodes":[{"id":"Q55-gPA1CJKFxGi-KATpZ","type":"custom","position":{"x":254.20215661154583,"y":-55.00884055016793},"data":{"module":"modules.ModularDiffusers","action":"ModelsLoader","type":"custom","label":"Load Models","category":"loader","description":"","resizable":true,"skipParamsCheck":true,"style":{},"params":{"model_type":{"label":"Model Type","type":"string","options":{"":"","DummyCustomPipeline":"Custom","StableDiffusionXLModularPipeline":"Stable Diffusion XL","QwenImageModularPipeline":"Qwen Image","QwenImageEditModularPipeline":"Qwen Image Edit","QwenImageEditPlusModularPipeline":"Qwen Image Edit Plus","QwenImageLayeredModularPipeline":"Qwen Image Layered","FluxModularPipeline":"Flux","FluxKontextModularPipeline":"Flux Kontext","Flux2KleinModularPipeline":"Flux 2 Klein Distilled","ZImageModularPipeline":"Z-Image","WanModularPipeline":"WAN"},"onChange":["set_filters",{"action":"signal","target":"unet_out"},{"action":"signal","target":"text_encoders"},{"action":"signal","target":"vae_out"},{"action":"signal","target":"image_encoder"}],"disabled":false,"value":"Flux2KleinModularPipeline"},"repo_id":{"label":"Repository ID","display":"modelselect","type":"string","value":{"source":"hub","value":"black-forest-labs/FLUX.2-klein-4B"},"fieldOptions":{"noValidation":true,"sources":["hub","local"],"filter":{"hub":{"className":["Flux2KleinModularPipeline"]}}},"disabled":false,"default":{"source":"hub","value":"black-forest-labs/FLUX.2-klein-4B"}},"dtype":{"label":"dtype","options":["float32","float16","bfloat16"],"value":"bfloat16","disabled":false},"device":{"label":"Device","type":"string","value":"cuda:0","options":{"cuda:0":{"arch":"cuda","name":"NVIDIA GeForce RTX 5090 31.36GB (0)","label":["cuda:0"],"total_memory":33668202496,"index":0},"cpu:0":{"arch":"cpu","name":"CPU (0)","label":["cpu:0"],"total_memory":0,"index":0}}},"trust_remote_code":{"label":"Trust Remote Code","type":"boolean","value":false},"auto_offload":{"label":"Enable Auto Offload","type":"boolean","value":true},"unet":{"label":"Denoise Model","display":"input","type":"diffusers_auto_model","isConnected":false},"vae":{"label":"VAE","display":"input","type":"diffusers_auto_model","isConnected":false},"lora_list":{"label":"Lora","display":"input","type":"custom_lora","isConnected":false},"text_encoders":{"label":"Text Encoders","display":"output","type":"diffusers_auto_models","signal":{"direction":"output","origin":"model_type","value":"Flux2KleinModularPipeline"},"isConnected":true},"unet_out":{"label":"Denoise Model","display":"output","type":"diffusers_auto_model","signal":{"direction":"output","origin":"model_type","value":"Flux2KleinModularPipeline"},"isConnected":true},"vae_out":{"label":"VAE","display":"output","type":"diffusers_auto_model","signal":{"direction":"output","origin":"model_type","value":"Flux2KleinModularPipeline"},"isConnected":true},"scheduler":{"label":"Scheduler","display":"output","type":"diffusers_auto_model","isConnected":true},"image_encoder":{"label":"Image Encoder","display":"output","type":"diffusers_auto_model","signal":{"direction":"output","origin":"model_type","value":"Flux2KleinModularPipeline"},"isConnected":false}},"time":[0,0,0],"memory":[0,0,0],"cache":false,"progress":0,"isCached":true,"memoryUsage":{"last":20712405504,"min":29491200,"max":20712405504},"executionTime":{"last":7.285879850387573,"min":4.134676933288574,"max":7.285879850387573}},"measured":{"width":319,"height":536},"selected":false,"dragging":false},{"id":"xoO5v5A46aiDzRV8CdwQf","type":"custom","position":{"x":678.1443291040526,"y":-43.67444892423402},"data":{"module":"modules.ModularDiffusers","action":"EncodePrompt","type":"custom","label":"Encode Prompt","category":"embedding","description":"","resizable":true,"skipParamsCheck":true,"style":{},"params":{"text_encoders":{"label":"Text Encoders *","type":"diffusers_auto_models","display":"input","onSignal":"update_node","isConnected":true,"signal":{"direction":"output","value":"Flux2KleinModularPipeline"},"disabled":false},"prompt":{"label":"Prompt *","type":"string","display":"textarea","default":"","value":"use the subjects from each image and put them in a beach about to start a fight"},"embeddings":{"label":"Text Embeddings","type":"embeddings","display":"output","isConnected":true},"doc":{"label":"Doc","type":"string","display":"output","isConnected":false}},"time":[0,0,0],"memory":[0,0,0],"cache":false,"progress":0,"isCached":true,"memoryUsage":{"last":16345200128,"min":8338302976,"max":16345200128},"executionTime":{"last":0.5181357860565186,"min":0.5181357860565186,"max":3.2384769916534424}},"measured":{"width":321,"height":276},"selected":true,"dragging":false,"width":321,"height":276},{"id":"1nWjS_jWwtCQQwxTEQwC8","type":"custom","position":{"x":1112.0754378533063,"y":-53.64280029341349},"data":{"module":"modules.ModularDiffusers","action":"Denoise","type":"custom","label":"Denoise","category":"sampler","description":"","resizable":true,"skipParamsCheck":true,"style":{},"params":{"unet":{"label":"Denoise Model *","display":"input","type":"diffusers_auto_model","onSignal":["update_node",{"action":"signal","target":"guider"},{"action":"signal","target":"controlnet_bundle"}],"isConnected":true,"signal":{"direction":"output","value":"Flux2KleinModularPipeline"},"disabled":false},"embeddings":{"label":"Text Embeddings *","type":"embeddings","display":"input","isConnected":true},"width":{"label":"Width","type":"int","default":1024,"min":64,"step":8,"value":1024,"isInput":true},"height":{"label":"Height","type":"int","default":1024,"min":64,"step":8,"value":1024,"isInput":true},"seed":{"label":"Seed","type":"int","display":"random","default":0,"min":0,"max":4294967295,"value":0},"num_inference_steps":{"label":"Steps","type":"int","display":"slider","default":4,"min":1,"max":100,"value":4},"guidance_scale":{"label":"Guidance Scale","type":"float","display":"slider","default":1,"min":1,"max":30,"step":0.1,"value":1},"image_latents":{"label":"Image Latents","type":"latents","display":"input","isConnected":true},"guider":{"label":"Guider","type":"custom_guider","display":"input","onChange":{"false":["guidance_scale"],"true":[]},"isConnected":false},"scheduler":{"label":"Scheduler *","type":"diffusers_auto_model","display":"input","isConnected":true},"latents":{"label":"Latents","type":"latents","display":"output","isConnected":true},"doc":{"label":"Doc","type":"string","display":"output","isConnected":false}},"time":[0,0,0],"memory":[0,0,0],"cache":false,"progress":0,"isCached":true,"memoryUsage":{"last":17376255488,"min":17369046528,"max":21091425280},"executionTime":{"last":2.6212544441223145,"min":2.553011178970337,"max":5.461134672164917}},"measured":{"width":386,"height":437},"selected":false,"dragging":false},{"id":"fNoX-2jsWixE29bRBWCPz","type":"custom","position":{"x":1586.0914069470814,"y":-48.178639266395976},"data":{"module":"modules.ModularDiffusers","action":"DecodeLatents","type":"custom","label":"Decode Latents","category":"sampler","description":"","resizable":true,"skipParamsCheck":true,"style":{},"params":{"vae":{"label":"VAE *","display":"input","type":"diffusers_auto_model","onSignal":"update_node","isConnected":true,"signal":{"direction":"output","value":"Flux2KleinModularPipeline"},"disabled":false},"latents":{"label":"Latents *","type":"latents","display":"input","isConnected":true},"images":{"label":"Images","type":"image","display":"output","isConnected":true},"doc":{"label":"Doc","type":"string","display":"output","isConnected":false}},"time":[0,0,0],"memory":[0,0,0],"cache":false,"progress":0,"isCached":true,"memoryUsage":{"last":17992636416,"min":17983068160,"max":22627498496},"executionTime":{"last":0.46506595611572266,"min":0.4423496723175049,"max":0.46506595611572266}},"measured":{"width":236,"height":195},"selected":false,"dragging":false},{"id":"J5jj21zSseNqkqZCackC0","type":"custom","position":{"x":1889.3523439465569,"y":-44.08051849613276},"data":{"module":"modules.Image","action":"Preview","type":"custom","label":"Preview Image","category":"image","description":"Preview an image","resizable":true,"skipParamsCheck":false,"style":{},"params":{"vae":{"type":"pipeline","display":"input","label":"VAE","isConnected":false,"hidden":true},"device":{"type":"string","default":"cuda:0","options":{"cuda:0":{"arch":"cuda","name":"NVIDIA GeForce RTX 5090 31.36GB (0)","label":["cuda:0"],"total_memory":33668202496,"index":0},"cpu:0":{"arch":"cpu","name":"CPU (0)","label":["cpu:0"],"total_memory":0,"index":0}},"hidden":true},"image":{"type":["image","latent"],"display":"input","onChange":{"action":"show","data":{"true":["vae","device"],"false":[]},"condition":{"type":"latent"}},"isConnected":true},"preview":{"display":"ui_image","type":"url","dataSource":"output","value":["/cache/J5jj21zSseNqkqZCackC0/output/0?format=WEBP&quality=100&t=1769213862.541143"]},"output":{"type":"image","display":"output","isConnected":false}},"time":[0,0,0],"memory":[0,0,0],"cache":false,"progress":0,"isCached":true,"memoryUsage":{"last":16076363264,"min":16066795008,"max":20712405504},"executionTime":{"last":0.0007128715515136719,"min":0.00003981590270996094,"max":0.0007128715515136719}},"measured":{"width":1044,"height":922},"selected":false,"dragging":false},{"id":"awx_oWVfLRXTd58gvvQs-","type":"custom","position":{"x":707.5591054253803,"y":342.2244378590507},"data":{"module":"modules.ModularDiffusers","action":"ImageEncode","type":"custom","label":"Encode Image","category":"sampler","description":"","resizable":true,"skipParamsCheck":true,"style":{},"params":{"vae":{"label":"VAE *","display":"input","type":"diffusers_auto_model","onSignal":"update_node","isConnected":true,"signal":{"direction":"output","value":"Flux2KleinModularPipeline"},"disabled":false},"image":{"label":"Image *","type":"image","display":"input","isConnected":true},"image_latents":{"label":"Image Latents","type":"latents","display":"output","isConnected":true},"doc":{"label":"Doc","type":"string","display":"output","isConnected":false}},"time":[0,0,0],"memory":[0,0,0],"cache":false,"progress":0,"isCached":true,"memoryUsage":{"last":9527787520,"min":9527331328,"max":9527787520},"executionTime":{"last":0.4677436351776123,"min":0.3745996952056885,"max":0.4677436351776123}},"measured":{"width":228,"height":195},"selected":false,"dragging":false},{"id":"L_AJcr_A9z9Ggeh9qQwaK","type":"custom","position":{"x":199.74018954580106,"y":611.2651317250179},"data":{"module":"modules.ModularDiffusers","action":"LoadImage","type":"custom","label":"Load Image","category":"image","description":"Load an image from a file with optional channel conversion.","resizable":true,"skipParamsCheck":false,"style":{},"params":{"image":{"label":"Image","display":"output","type":"image","isConnected":true},"label":{"display":"ui_label","value":"Load Image"},"file":{"label":false,"display":"filebrowser","type":"str","fieldOptions":{"fileTypes":["image"],"multiple":true},"value":["https://huggingface.co/datasets/OzzyGT/diffusers-examples/resolve/main/resources/turtle.png","https://huggingface.co/datasets/OzzyGT/diffusers-examples/resolve/main/resources/kangaroo.png"]},"channels":{"label":"Channels","type":"string","default":"Keep Original","options":["Keep Original","RGB (3 channels)","RGBA (4 channels)"],"description":"Convert output image(s) to specified channel mode"},"size_index":{"label":"Size Index","type":"int","default":0,"min":0,"description":"Zero-based index of the image to get width/height from"},"scale_factor":{"label":"Scale Factor","type":"string","default":"1x","options":["0.2x","0.4x","0.5x","0.6x","0.8x","1x","2x","3x","4x","6x","8x","10x"],"description":"Scale factor for width/height output (maintains aspect ratio)"},"width":{"label":"Width","display":"output","type":"int","isConnected":true},"height":{"label":"Height","display":"output","type":"int","isConnected":true}},"time":[0,0,0],"memory":[0,0,0],"cache":false,"progress":0,"isCached":true,"memoryUsage":{"last":8140679680,"min":8131241472,"max":8140679680},"executionTime":{"last":1.6549568176269531,"min":0.6177511215209961,"max":1.6549568176269531}},"measured":{"width":762,"height":694},"selected":false,"dragging":false}],"edges":[{"source":"Q55-gPA1CJKFxGi-KATpZ","target":"awx_oWVfLRXTd58gvvQs-","sourceHandle":"vae_out","targetHandle":"vae","edgeType":"default","id":"eyJf2YcbZwdk8LvDL98Pn","type":"default","className":"category-diffusers_auto_model"},{"source":"L_AJcr_A9z9Ggeh9qQwaK","target":"awx_oWVfLRXTd58gvvQs-","sourceHandle":"image","targetHandle":"image","edgeType":"default","id":"P-umO5r44gtorN65BI1zF","type":"default","className":"category-image"},{"source":"Q55-gPA1CJKFxGi-KATpZ","target":"fNoX-2jsWixE29bRBWCPz","sourceHandle":"vae_out","targetHandle":"vae","edgeType":"default","id":"mVzI7cscHRm9O0_OcNPRm","type":"default","className":"category-diffusers_auto_model"},{"source":"fNoX-2jsWixE29bRBWCPz","target":"J5jj21zSseNqkqZCackC0","sourceHandle":"images","targetHandle":"image","edgeType":"default","id":"ZWAodZvWSZUNC0GpVcCQm","type":"default","className":"category-image"},{"source":"Q55-gPA1CJKFxGi-KATpZ","target":"1nWjS_jWwtCQQwxTEQwC8","sourceHandle":"unet_out","targetHandle":"unet","edgeType":"default","id":"M6zat2MlA-EGwAeejYusM","type":"default","className":"category-diffusers_auto_model"},{"source":"Q55-gPA1CJKFxGi-KATpZ","target":"1nWjS_jWwtCQQwxTEQwC8","sourceHandle":"scheduler","targetHandle":"scheduler","edgeType":"default","id":"P07NoAiZ5ntkxDL5mpBC_","type":"default","className":"category-diffusers_auto_model"},{"source":"awx_oWVfLRXTd58gvvQs-","target":"1nWjS_jWwtCQQwxTEQwC8","sourceHandle":"image_latents","targetHandle":"image_latents","edgeType":"default","id":"xiXgXKXaOiDWOrdn8r8RF","type":"default","className":"category-latents"},{"source":"1nWjS_jWwtCQQwxTEQwC8","target":"fNoX-2jsWixE29bRBWCPz","sourceHandle":"latents","targetHandle":"latents","edgeType":"default","id":"V-CgUefPHFiRu-5kOvGam","type":"default","className":"category-latents"},{"source":"Q55-gPA1CJKFxGi-KATpZ","target":"xoO5v5A46aiDzRV8CdwQf","sourceHandle":"text_encoders","targetHandle":"text_encoders","edgeType":"default","id":"h0zOTc79jF05DU0I23nnk","type":"default","className":"category-diffusers_auto_models"},{"source":"xoO5v5A46aiDzRV8CdwQf","target":"1nWjS_jWwtCQQwxTEQwC8","sourceHandle":"embeddings","targetHandle":"embeddings","edgeType":"default","id":"k1E7-BYtOiUW_qvuMmfUr","type":"default","className":"category-embeddings"},{"source":"L_AJcr_A9z9Ggeh9qQwaK","sourceHandle":"width","target":"1nWjS_jWwtCQQwxTEQwC8","targetHandle":"width","edgeType":"default","id":"scHlHQFNyp8pZy1AC9dmh","type":"default","className":"category-int"},{"source":"L_AJcr_A9z9Ggeh9qQwaK","sourceHandle":"height","target":"1nWjS_jWwtCQQwxTEQwC8","targetHandle":"height","edgeType":"default","id":"SxKwlDw-6j19PMxPOWU6M","type":"default","className":"category-int"}],"viewport":{"x":-64.83905898537273,"y":118.88402086246612,"zoom":0.7022224378689988}}